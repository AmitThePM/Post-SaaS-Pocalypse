<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infrastructure Investment Strategy Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;600;700&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-deep-navy: #0A1628;
            --color-slate: #1E3A5F;
            --color-gold: #D4AF37;
            --color-copper: #B87333;
            --color-silver: #C0C0C0;
            --color-cream: #F5F1E8;
            --color-seafoam: #2A4D3F;
            --color-rust: #8B4513;
            --color-success: #2D5F4C;
            --color-warning: #8B6914;
            --color-danger: #7A2828;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: linear-gradient(135deg, var(--color-deep-navy) 0%, #162C4A 50%, #1E3A5F 100%);
            color: var(--color-cream);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated background pattern */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(212, 175, 55, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(184, 115, 51, 0.05) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
            animation: breathe 8s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.6; }
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInDown 1s ease-out;
        }

        h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 4.5rem;
            font-weight: 300;
            letter-spacing: 2px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--color-gold) 0%, var(--color-copper) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--color-silver);
            letter-spacing: 4px;
            text-transform: uppercase;
            font-weight: 400;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 40px;
            margin-bottom: 60px;
            animation: fadeInUp 1s ease-out 0.2s both;
        }

        .card {
            background: rgba(30, 58, 95, 0.4);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card:hover {
            border-color: rgba(212, 175, 55, 0.5);
            transform: translateY(-4px);
            box-shadow: 
                0 30px 80px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
        }

        h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.2rem;
            font-weight: 600;
            margin-bottom: 30px;
            color: var(--color-gold);
            border-bottom: 2px solid rgba(212, 175, 55, 0.3);
            padding-bottom: 15px;
        }

        .input-group {
            margin-bottom: 30px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-size: 0.95rem;
            color: var(--color-silver);
            letter-spacing: 1px;
            text-transform: uppercase;
            font-weight: 500;
        }

        .strategy-tabs {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 30px;
        }

        .tab-btn {
            padding: 14px 20px;
            font-size: 0.9rem;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            background: rgba(10, 22, 40, 0.4);
            color: var(--color-silver);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'DM Sans', sans-serif;
        }

        .tab-btn:hover {
            border-color: rgba(212, 175, 55, 0.4);
            background: rgba(10, 22, 40, 0.6);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.3) 0%, rgba(184, 115, 51, 0.3) 100%);
            border-color: var(--color-gold);
            color: var(--color-gold);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.2);
        }

        .strategy-section {
            display: none;
            animation: fadeInUp 0.4s ease-out;
        }

        .strategy-section.active {
            display: block;
        }

        .select-input {
            width: 100%;
            padding: 14px 20px;
            font-size: 1rem;
            background: rgba(10, 22, 40, 0.6);
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 12px;
            color: var(--color-cream);
            font-family: 'DM Sans', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .select-input:focus {
            outline: none;
            border-color: var(--color-gold);
            box-shadow: 0 0 0 4px rgba(212, 175, 55, 0.1);
            background: rgba(10, 22, 40, 0.8);
        }

        .select-input option {
            background: var(--color-deep-navy);
            color: var(--color-cream);
            padding: 10px;
        }

        .projection-summary {
            background: rgba(10, 22, 40, 0.6);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            animation: fadeInUp 0.4s ease-out;
        }

        .projection-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
        }

        .projection-item:last-child {
            border-bottom: none;
        }

        .projection-label {
            font-size: 0.9rem;
            color: var(--color-silver);
            letter-spacing: 0.5px;
        }

        .projection-value {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--color-gold);
            font-family: 'Cormorant Garamond', serif;
        }

        .projection-value.positive {
            color: #5FD4A1;
        }

        input[type="number"] {
            width: 100%;
            padding: 18px 24px;
            font-size: 1.8rem;
            font-weight: 700;
            background: rgba(10, 22, 40, 0.6);
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 12px;
            color: var(--color-gold);
            font-family: 'DM Sans', sans-serif;
            transition: all 0.3s ease;
        }

        input[type="number"].small-input {
            font-size: 1.2rem;
            padding: 14px 20px;
        }

        input[type="number"]:focus {
            outline: none;
            border-color: var(--color-gold);
            box-shadow: 0 0 0 4px rgba(212, 175, 55, 0.1);
            background: rgba(10, 22, 40, 0.8);
        }

        .generate-btn {
            width: 100%;
            padding: 20px;
            font-size: 1.1rem;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            background: linear-gradient(135deg, var(--color-gold) 0%, var(--color-copper) 100%);
            color: var(--color-deep-navy);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(212, 175, 55, 0.3);
            font-family: 'DM Sans', sans-serif;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(212, 175, 55, 0.5);
        }

        .generate-btn:active {
            transform: translateY(0);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .stat-box {
            background: rgba(10, 22, 40, 0.4);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(212, 175, 55, 0.2);
            transition: all 0.3s ease;
        }

        .stat-box:hover {
            border-color: rgba(212, 175, 55, 0.5);
            background: rgba(10, 22, 40, 0.6);
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--color-silver);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--color-gold);
            font-family: 'Cormorant Garamond', serif;
        }

        .allocation-container {
            display: none;
            animation: fadeInUp 0.6s ease-out;
        }

        .allocation-container.active {
            display: block;
        }

        .category-item {
            background: rgba(10, 22, 40, 0.4);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .category-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--category-color);
            transition: width 0.3s ease;
        }

        .category-item:hover {
            border-color: rgba(212, 175, 55, 0.5);
            background: rgba(10, 22, 40, 0.6);
            transform: translateX(8px);
        }

        .category-item:hover::before {
            width: 8px;
        }

        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .category-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--color-cream);
        }

        .category-allocation {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--color-gold);
            font-family: 'Cormorant Garamond', serif;
        }

        .category-bar-container {
            height: 8px;
            background: rgba(212, 175, 55, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .category-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--category-color), var(--category-color-light));
            border-radius: 4px;
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            animation: fillBar 1s ease-out;
        }

        @keyframes fillBar {
            from { width: 0; }
        }

        .category-amount {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--color-copper);
            margin-bottom: 4px;
        }

        .category-details {
            font-size: 0.85rem;
            color: var(--color-silver);
            line-height: 1.5;
        }

        .mixed-breakdown {
            background: rgba(212, 175, 55, 0.08);
            border-radius: 8px;
            padding: 12px 16px;
            margin: 10px 0;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            border: 1px solid rgba(212, 175, 55, 0.15);
        }

        .breakdown-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .breakdown-label {
            font-size: 0.7rem;
            color: var(--color-silver);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 500;
        }

        .breakdown-value {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--color-copper);
            font-family: 'DM Sans', sans-serif;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 22, 40, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            overflow-y: auto;
            animation: fadeIn 0.3s ease-out;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(30, 58, 95, 0.95) 0%, rgba(22, 44, 74, 0.95) 100%);
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 24px;
            padding: 50px;
            max-width: 900px;
            width: 100%;
            box-shadow: 0 40px 100px rgba(0, 0, 0, 0.5);
            animation: slideUp 0.4s ease-out;
            position: relative;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(212, 175, 55, 0.2);
            border: 1px solid rgba(212, 175, 55, 0.3);
            color: var(--color-gold);
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 300;
        }

        .close-btn:hover {
            background: rgba(212, 175, 55, 0.3);
            transform: rotate(90deg);
        }

        .thesis-section {
            margin-bottom: 30px;
        }

        .thesis-section h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.8rem;
            color: var(--color-gold);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        }

        .thesis-section p {
            line-height: 1.8;
            color: var(--color-cream);
            margin-bottom: 15px;
        }

        .holdings-table {
            width: 100%;
            margin-top: 20px;
            border-collapse: separate;
            border-spacing: 0 8px;
        }

        .holdings-table th {
            text-align: left;
            padding: 12px;
            font-size: 0.8rem;
            color: var(--color-silver);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .holdings-table td {
            background: rgba(10, 22, 40, 0.4);
            padding: 16px 12px;
            border-top: 1px solid rgba(212, 175, 55, 0.1);
            border-bottom: 1px solid rgba(212, 175, 55, 0.1);
        }

        .holdings-table td:first-child {
            border-left: 1px solid rgba(212, 175, 55, 0.1);
            border-radius: 8px 0 0 8px;
        }

        .holdings-table td:last-child {
            border-right: 1px solid rgba(212, 175, 55, 0.1);
            border-radius: 0 8px 8px 0;
        }

        .holdings-table tr:hover td {
            background: rgba(10, 22, 40, 0.6);
            border-color: rgba(212, 175, 55, 0.3);
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .badge-high { background: rgba(45, 95, 76, 0.3); color: #5FD4A1; }
        .badge-medium { background: rgba(139, 105, 20, 0.3); color: #D4AF37; }
        .badge-low { background: rgba(122, 40, 40, 0.3); color: #E57373; }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .metric-card {
            background: rgba(10, 22, 40, 0.4);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .metric-label {
            font-size: 0.75rem;
            color: var(--color-silver);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-gold);
            font-family: 'Cormorant Garamond', serif;
        }

        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 3rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Infrastructure Capital</h1>
            <p class="subtitle">Investment Strategy Portal</p>
        </header>

        <div class="main-content">
            <div class="card">
                <h2>Portfolio Builder</h2>
                
                <div class="input-group">
                    <label>Investment Strategy</label>
                    <div class="strategy-tabs">
                        <button class="tab-btn active" onclick="selectStrategy('lumpsum')">Lump Sum</button>
                        <button class="tab-btn" onclick="selectStrategy('recurring')">Recurring</button>
                        <button class="tab-btn" onclick="selectStrategy('mixed')">Mixed</button>
                    </div>
                </div>

                <!-- Lump Sum Section -->
                <div id="lumpsumSection" class="strategy-section active">
                    <div class="input-group">
                        <label for="lumpsumAmount">Lump Sum Amount ($)</label>
                        <input type="number" id="lumpsumAmount" placeholder="100,000" min="1000" step="1000">
                    </div>
                </div>

                <!-- Recurring Section -->
                <div id="recurringSection" class="strategy-section">
                    <div class="input-group">
                        <label for="recurringAmount">Recurring Amount ($)</label>
                        <input type="number" id="recurringAmount" placeholder="5,000" min="100" step="100">
                    </div>
                    <div class="input-group">
                        <label>Frequency</label>
                        <select id="recurringFrequency" class="select-input">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly" selected>Monthly</option>
                            <option value="quarterly">Quarterly</option>
                            <option value="annually">Annually</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="recurringPeriod">Investment Period (months)</label>
                        <input type="number" id="recurringPeriod" placeholder="12" min="1" max="360" value="12">
                    </div>
                </div>

                <!-- Mixed Section -->
                <div id="mixedSection" class="strategy-section">
                    <div class="input-group">
                        <label for="mixedLumpsum">Initial Lump Sum ($)</label>
                        <input type="number" id="mixedLumpsum" placeholder="50,000" min="0" step="1000">
                    </div>
                    <div class="input-group">
                        <label for="mixedRecurring">Recurring Amount ($)</label>
                        <input type="number" id="mixedRecurring" placeholder="2,000" min="0" step="100">
                    </div>
                    <div class="input-group">
                        <label>Frequency</label>
                        <select id="mixedFrequency" class="select-input">
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly" selected>Monthly</option>
                            <option value="quarterly">Quarterly</option>
                            <option value="annually">Annually</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="mixedPeriod">Investment Period (months)</label>
                        <input type="number" id="mixedPeriod" placeholder="12" min="1" max="360" value="12">
                    </div>
                </div>

                <div class="projection-summary" id="projectionSummary" style="display: none;">
                    <div class="projection-item">
                        <span class="projection-label">Total Investment</span>
                        <span class="projection-value" id="totalInvestment">$0</span>
                    </div>
                    <div class="projection-item">
                        <span class="projection-label">Projected Value (Base Case)</span>
                        <span class="projection-value" id="projectedValue">$0</span>
                    </div>
                    <div class="projection-item">
                        <span class="projection-label">Estimated Gain</span>
                        <span class="projection-value positive" id="estimatedGain">$0</span>
                    </div>
                </div>
                
                <button class="generate-btn" onclick="generateStrategy()">Generate Strategy</button>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-label">Expected Return</div>
                        <div class="stat-value">9-11%</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Time Horizon</div>
                        <div class="stat-value">5-10 yrs</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Durability Score</div>
                        <div class="stat-value">8.3/10</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Risk Level</div>
                        <div class="stat-value">Moderate</div>
                    </div>
                </div>
            </div>

            <div class="card allocation-container" id="allocationContainer">
                <h2>Strategic Allocation</h2>
                <div id="categoryList"></div>
            </div>
        </div>
    </div>

    <div class="modal" id="detailModal">
        <div class="modal-content">
            <button class="close-btn" onclick="closeModal()">×</button>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        let currentStrategy = 'lumpsum';

        const portfolioData = {
            'Utilities & Grid': {
                allocation: 22.0,
                color: '#2A9D8F',
                colorLight: '#4DB8A8',
                avgDurability: 8.9,
                expectedReturn: '7-9%',
                volatility: '12%',
                thesis: 'Highest conviction category. Utilities provide essential infrastructure for AI data centers, which require massive power capacity. Companies like NextEra (NEE) are at the forefront of renewable energy transition. Duke (DUK) and Xcel (XEL) provide stable dividend income with geographic diversification. The sector offers defensive characteristics during market volatility while participating in structural growth from electrification.',
                catalysts: 'AI data center power demand, renewable energy transition, regulated rate increases, infrastructure modernization spending',
                holdings: [
                    { ticker: 'XLU', name: 'Utilities ETF', allocation: 7.7, durability: 9.0, growth: 'Moderate' },
                    { ticker: 'NEE', name: 'NextEra Energy', allocation: 5.5, durability: 9.5, growth: 'High' },
                    { ticker: 'DUK', name: 'Duke Energy', allocation: 4.4, durability: 8.5, growth: 'Low' },
                    { ticker: 'XEL', name: 'Xcel Energy', allocation: 4.4, durability: 8.5, growth: 'Moderate' }
                ]
            },
            'Energy (Base + Nuclear)': {
                allocation: 16.0,
                color: '#E76F51',
                colorLight: '#F08968',
                avgDurability: 8.5,
                expectedReturn: '10-14%',
                volatility: '22%',
                thesis: 'Nuclear renaissance is a key thesis. Constellation Energy (CEG) is the largest nuclear operator in the US and primary beneficiary of AI power demand. Traditional energy (XOM, CVX) provides cash flow and commodity exposure. Uranium (URA) offers pure-play exposure to nuclear fuel supply constraints. This category balances transition energy with future clean baseload power.',
                catalysts: 'Tech companies signing nuclear PPAs, uranium supply deficit, SMR development, data center power needs, energy security priorities',
                holdings: [
                    { ticker: 'CEG', name: 'Constellation Energy', allocation: 5.6, durability: 9.5, growth: 'Very High' },
                    { ticker: 'XOM', name: 'Exxon Mobil', allocation: 4.0, durability: 8.0, growth: 'Moderate' },
                    { ticker: 'CVX', name: 'Chevron', allocation: 3.2, durability: 8.0, growth: 'Moderate' },
                    { ticker: 'URA', name: 'Uranium ETF', allocation: 3.2, durability: 8.5, growth: 'Very High' }
                ]
            },
            'Electrical Infrastructure': {
                allocation: 16.0,
                color: '#F4A261',
                colorLight: '#F6B57F',
                avgDurability: 8.4,
                expectedReturn: '9-12%',
                volatility: '18%',
                thesis: 'Critical enabler for electrification mega-trend. Eaton (ETN) and ABB provide electrical components for data centers, EV charging, and grid infrastructure. These companies have pricing power due to technical complexity and long product cycles. Infrastructure ETF (PAVE) provides broad exposure to electrical, transportation, and utility infrastructure.',
                catalysts: '$1T+ infrastructure spending, EV charging buildout, data center construction boom, grid modernization, reshoring manufacturing',
                holdings: [
                    { ticker: 'ETN', name: 'Eaton', allocation: 5.6, durability: 9.0, growth: 'High' },
                    { ticker: 'ABB', name: 'ABB Ltd', allocation: 4.8, durability: 8.5, growth: 'High' },
                    { ticker: 'PAVE', name: 'Infrastructure ETF', allocation: 3.2, durability: 8.0, growth: 'High' },
                    { ticker: 'HUBB', name: 'Hubbell', allocation: 2.4, durability: 8.0, growth: 'Moderate' }
                ]
            },
            'Materials (Copper/Mining)': {
                allocation: 11.0,
                color: '#B87333',
                colorLight: '#D4915A',
                avgDurability: 8.8,
                expectedReturn: '12-16%',
                volatility: '28%',
                thesis: 'Copper is the "new oil" for electrification. EVs require 4x copper vs ICE vehicles. Data centers, solar/wind, and grid modernization all require massive copper inputs. Freeport-McMoRan (FCX) offers US-based exposure. BHP and Rio Tinto provide geographic diversification. COPX captures pure-play copper mining exposure. Supply constraints create favorable pricing environment.',
                catalysts: 'Global copper deficit, mine depletion, permitting challenges limiting new supply, electrification demand, China stimulus',
                holdings: [
                    { ticker: 'FCX', name: 'Freeport-McMoRan', allocation: 4.4, durability: 8.8, growth: 'High' },
                    { ticker: 'BHP', name: 'BHP Group', allocation: 2.75, durability: 8.8, growth: 'Moderate' },
                    { ticker: 'COPX', name: 'Copper Miners ETF', allocation: 2.2, durability: 8.5, growth: 'Very High' },
                    { ticker: 'RIO', name: 'Rio Tinto', allocation: 1.65, durability: 8.8, growth: 'Moderate' }
                ]
            },
            'Healthcare': {
                allocation: 9.0,
                color: '#457B9D',
                colorLight: '#6495B8',
                avgDurability: 8.5,
                expectedReturn: '8-10%',
                volatility: '14%',
                thesis: 'Reducing from 10% to fund higher-conviction infrastructure plays. UnitedHealth (UNH) provides managed care exposure with pricing power. Johnson & Johnson (JNJ) offers pharmaceutical and medical device diversification with defensive characteristics. Healthcare ETF (XLV) provides broad sector exposure. Still meaningful allocation given aging demographics.',
                catalysts: 'Aging population, GLP-1 drug adoption, medical device innovation, defensive characteristics in downturns',
                holdings: [
                    { ticker: 'UNH', name: 'UnitedHealth Group', allocation: 3.6, durability: 8.5, growth: 'High' },
                    { ticker: 'JNJ', name: 'Johnson & Johnson', allocation: 3.15, durability: 8.5, growth: 'Low' },
                    { ticker: 'XLV', name: 'Healthcare ETF', allocation: 2.25, durability: 8.5, growth: 'Moderate' }
                ]
            },
            'Defense & Aerospace': {
                allocation: 8.0,
                color: '#6B705C',
                colorLight: '#8B8F7C',
                avgDurability: 8.3,
                expectedReturn: '8-11%',
                volatility: '15%',
                thesis: 'Geopolitical tensions and defense spending increases support this allocation. Lockheed Martin (LMT) and RTX provide exposure to multi-year defense contracts with high visibility. ITA offers aerospace recovery exposure alongside defense. Moderate growth, stable cash flows, and government contract certainty make this a core holding.',
                catalysts: 'Geopolitical tensions, defense budget increases, multi-year backlog, commercial aerospace recovery, space economy',
                holdings: [
                    { ticker: 'LMT', name: 'Lockheed Martin', allocation: 3.6, durability: 8.3, growth: 'Moderate' },
                    { ticker: 'RTX', name: 'RTX Corp', allocation: 2.8, durability: 8.3, growth: 'Moderate' },
                    { ticker: 'ITA', name: 'Defense ETF', allocation: 1.6, durability: 8.3, growth: 'Moderate' }
                ]
            },
            'Data Centers': {
                allocation: 8.0,
                color: '#5E60CE',
                colorLight: '#7F81E0',
                avgDurability: 7.8,
                expectedReturn: '11-15%',
                volatility: '24%',
                thesis: 'AI infrastructure boom continues. Equinix (EQIX) and Digital Realty (DLR) are REITs providing physical infrastructure for cloud and AI computing. SRVR ETF captures broader data center ecosystem. Increasing to 8% from 7% to capture continued AI investment. These assets have high barriers to entry and long-term contracts.',
                catalysts: 'AI model training demand, edge computing growth, 5G infrastructure, cloud migration acceleration, hyperscaler expansion',
                holdings: [
                    { ticker: 'EQIX', name: 'Equinix', allocation: 3.2, durability: 8.0, growth: 'Very High' },
                    { ticker: 'DLR', name: 'Digital Realty', allocation: 2.8, durability: 8.0, growth: 'High' },
                    { ticker: 'SRVR', name: 'Data Center ETF', allocation: 2.0, durability: 7.5, growth: 'Very High' }
                ]
            },
            'Semiconductors': {
                allocation: 5.0,
                color: '#9B59B6',
                colorLight: '#B87FD1',
                avgDurability: 6.9,
                expectedReturn: '10-18%',
                volatility: '35%',
                thesis: 'Reducing from 7% to 5% due to cyclical risks and valuation concerns. While AI demand is real, sector durability scores are lower (6.5-7.0/10) and volatility is high. NVIDIA (NVDA) maintains strong position but at premium valuation. TSMC and ASML provide foundry and equipment exposure. Reduced allocation reflects potential oversupply in 2026-27.',
                catalysts: 'AI chip demand, automotive semiconductors, but offset by cyclical risks, geopolitical exposure, potential oversupply',
                holdings: [
                    { ticker: 'NVDA', name: 'NVIDIA', allocation: 1.75, durability: 7.0, growth: 'Very High' },
                    { ticker: 'TSM', name: 'TSMC', allocation: 1.5, durability: 7.0, growth: 'Very High' },
                    { ticker: 'ASML', name: 'ASML', allocation: 1.0, durability: 6.5, growth: 'Very High' },
                    { ticker: 'AVGO', name: 'Broadcom', allocation: 0.75, durability: 7.0, growth: 'Very High' }
                ]
            },
            'Financials & Consumer Staples': {
                allocation: 3.0,
                color: '#A0826D',
                colorLight: '#BDA191',
                avgDurability: 7.4,
                expectedReturn: '7-9%',
                volatility: '16%',
                thesis: 'Reducing from 5% to 3% as lowest priority allocation. Berkshire Hathaway (BRK.B) provides Warren Buffett\'s capital allocation and diversification. JPMorgan (JPM) offers banking exposure with fortress balance sheet. Consumer Staples ETF (XLP) provides defensive positioning. Small allocation reflects focus on infrastructure over traditional value.',
                catalysts: 'Interest rate normalization (financials), recession resilience (staples), but limited to structural growth themes',
                holdings: [
                    { ticker: 'BRK.B', name: 'Berkshire Hathaway', allocation: 1.2, durability: 7.5, growth: 'Moderate' },
                    { ticker: 'JPM', name: 'JPMorgan Chase', allocation: 0.9, durability: 7.5, growth: 'Moderate' },
                    { ticker: 'XLP', name: 'Consumer Staples ETF', allocation: 0.9, durability: 7.2, growth: 'Low' }
                ]
            },
            'Cash Reserve': {
                allocation: 2.0,
                color: '#C0C0C0',
                colorLight: '#D8D8D8',
                avgDurability: 10.0,
                expectedReturn: '5.0%',
                volatility: '0%',
                thesis: 'Reducing from 3% to 2% to deploy capital into higher-conviction opportunities. Maintains emergency liquidity and optionality for market dislocations. At current money market rates (~5%), provides competitive risk-free return while waiting for opportunities. Will rebuild to 5% in late-cycle positioning (2029-2030).',
                catalysts: 'Maintains flexibility, emergency liquidity, dry powder for corrections, earns 5%+ in current environment',
                holdings: [
                    { ticker: 'CASH', name: 'Money Market / HYSA', allocation: 2.0, durability: 10.0, growth: 'None' }
                ]
            }
        };

        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        function selectStrategy(strategy) {
            currentStrategy = strategy;
            
            // Update tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Show appropriate section
            document.querySelectorAll('.strategy-section').forEach(section => section.classList.remove('active'));
            document.getElementById(strategy + 'Section').classList.add('active');
            
            // Update projection
            updateProjection();
        }

        function getFrequencyMultiplier(frequency) {
            const multipliers = {
                'daily': 365 / 12,
                'weekly': 52 / 12,
                'monthly': 1,
                'quarterly': 1 / 3,
                'annually': 1 / 12
            };
            return multipliers[frequency] || 1;
        }

        function getFrequencyLabel(frequency) {
            const labels = {
                'daily': 'day',
                'weekly': 'week',
                'monthly': 'month',
                'quarterly': 'quarter',
                'annually': 'year'
            };
            return labels[frequency] || 'month';
        }

        function calculateTotalInvestment() {
            let total = 0;
            let monthlyContribution = 0;
            let period = 0;
            
            if (currentStrategy === 'lumpsum') {
                total = parseFloat(document.getElementById('lumpsumAmount').value) || 0;
            } else if (currentStrategy === 'recurring') {
                const amount = parseFloat(document.getElementById('recurringAmount').value) || 0;
                const frequency = document.getElementById('recurringFrequency').value;
                period = parseFloat(document.getElementById('recurringPeriod').value) || 12;
                const multiplier = getFrequencyMultiplier(frequency);
                monthlyContribution = amount * multiplier;
                total = monthlyContribution * period;
            } else if (currentStrategy === 'mixed') {
                const lumpsum = parseFloat(document.getElementById('mixedLumpsum').value) || 0;
                const recurring = parseFloat(document.getElementById('mixedRecurring').value) || 0;
                const frequency = document.getElementById('mixedFrequency').value;
                period = parseFloat(document.getElementById('mixedPeriod').value) || 12;
                const multiplier = getFrequencyMultiplier(frequency);
                monthlyContribution = recurring * multiplier;
                total = lumpsum + (monthlyContribution * period);
            }
            
            return { total, monthlyContribution, period };
        }

        function calculateProjectedValue(totalInvestment, monthlyContribution, period) {
            const annualReturn = 0.10; // 10% base case return
            const monthlyReturn = Math.pow(1 + annualReturn, 1/12) - 1;
            
            if (currentStrategy === 'lumpsum') {
                // Simple compound interest for lump sum
                const years = period / 12 || 5; // Default to 5 years if no period
                return totalInvestment * Math.pow(1 + annualReturn, years);
            } else {
                // Future value of series for recurring investments
                const lumpsumPart = currentStrategy === 'mixed' 
                    ? parseFloat(document.getElementById('mixedLumpsum').value) || 0 
                    : 0;
                
                const lumpsumFV = lumpsumPart * Math.pow(1 + monthlyReturn, period);
                
                // Future value of annuity (recurring contributions)
                const recurringFV = monthlyContribution * 
                    ((Math.pow(1 + monthlyReturn, period) - 1) / monthlyReturn);
                
                return lumpsumFV + recurringFV;
            }
        }

        function updateProjection() {
            const { total, monthlyContribution, period } = calculateTotalInvestment();
            
            if (total > 0) {
                const projectedValue = calculateProjectedValue(total, monthlyContribution, period || 60);
                const gain = projectedValue - total;
                
                document.getElementById('totalInvestment').textContent = formatCurrency(total);
                document.getElementById('projectedValue').textContent = formatCurrency(projectedValue);
                document.getElementById('estimatedGain').textContent = formatCurrency(gain);
                document.getElementById('projectionSummary').style.display = 'block';
            } else {
                document.getElementById('projectionSummary').style.display = 'none';
            }
        }

        // Add event listeners for real-time projection updates
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = ['lumpsumAmount', 'recurringAmount', 'recurringPeriod', 
                          'mixedLumpsum', 'mixedRecurring', 'mixedPeriod'];
            
            inputs.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('input', updateProjection);
                }
            });
            
            const selects = ['recurringFrequency', 'mixedFrequency'];
            selects.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('change', updateProjection);
                }
            });
            
            // Make smaller inputs visually distinct
            inputs.forEach(id => {
                if (id !== 'lumpsumAmount') {
                    const element = document.getElementById(id);
                    if (element && element.type === 'number') {
                        element.classList.add('small-input');
                    }
                }
            });
        });

        function generateStrategy() {
            const { total } = calculateTotalInvestment();
            
            if (!total || total < 1000) {
                alert('Please enter a valid investment amount of at least $1,000');
                return;
            }

            const container = document.getElementById('allocationContainer');
            const categoryList = document.getElementById('categoryList');
            
            categoryList.innerHTML = '';
            
            // Add investment summary header
            const summaryDiv = document.createElement('div');
            summaryDiv.style.cssText = `
                background: rgba(212, 175, 55, 0.1);
                border: 1px solid rgba(212, 175, 55, 0.3);
                border-radius: 12px;
                padding: 20px;
                margin-bottom: 30px;
            `;
            
            let strategyText = '';
            if (currentStrategy === 'lumpsum') {
                strategyText = `<strong>Lump Sum Investment:</strong> ${formatCurrency(total)}`;
            } else if (currentStrategy === 'recurring') {
                const amount = parseFloat(document.getElementById('recurringAmount').value);
                const frequency = document.getElementById('recurringFrequency').value;
                const period = parseFloat(document.getElementById('recurringPeriod').value);
                strategyText = `<strong>Recurring Investment:</strong> ${formatCurrency(amount)} per ${getFrequencyLabel(frequency)} for ${period} months`;
            } else if (currentStrategy === 'mixed') {
                const lumpsum = parseFloat(document.getElementById('mixedLumpsum').value) || 0;
                const recurring = parseFloat(document.getElementById('mixedRecurring').value) || 0;
                const frequency = document.getElementById('mixedFrequency').value;
                const period = parseFloat(document.getElementById('mixedPeriod').value);
                strategyText = `<strong>Mixed Strategy:</strong> ${formatCurrency(lumpsum)} upfront + ${formatCurrency(recurring)} per ${getFrequencyLabel(frequency)} for ${period} months`;
            }
            
            summaryDiv.innerHTML = `
                <div style="font-size: 1rem; color: var(--color-cream); margin-bottom: 10px;">${strategyText}</div>
                <div style="font-size: 1.1rem; color: var(--color-silver);">
                    <strong>Total Investment:</strong> <span style="color: var(--color-gold); font-size: 1.4rem; font-family: 'Cormorant Garamond', serif;">${formatCurrency(total)}</span>
                </div>
            `;
            
            categoryList.appendChild(summaryDiv);
            
            Object.entries(portfolioData).forEach(([category, data]) => {
                const amount = (total * data.allocation) / 100;
                
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'category-item';
                categoryDiv.style.setProperty('--category-color', data.color);
                categoryDiv.style.setProperty('--category-color-light', data.colorLight);
                categoryDiv.onclick = () => showDetails(category);
                
                // Calculate breakdown for mixed strategy
                let breakdownHTML = '';
                if (currentStrategy === 'mixed') {
                    const lumpsum = parseFloat(document.getElementById('mixedLumpsum').value) || 0;
                    const recurring = parseFloat(document.getElementById('mixedRecurring').value) || 0;
                    const frequency = document.getElementById('mixedFrequency').value;
                    const frequencyLabel = getFrequencyLabel(frequency);
                    
                    const lumpsumPortion = (lumpsum * data.allocation) / 100;
                    const recurringPortion = (recurring * data.allocation) / 100;
                    
                    breakdownHTML = `
                        <div class="mixed-breakdown">
                            <div class="breakdown-item">
                                <span class="breakdown-label">Initial:</span>
                                <span class="breakdown-value">${formatCurrency(lumpsumPortion)}</span>
                            </div>
                            <div class="breakdown-item">
                                <span class="breakdown-label">Per ${frequencyLabel}:</span>
                                <span class="breakdown-value">${formatCurrency(recurringPortion)}</span>
                            </div>
                        </div>
                    `;
                }
                
                categoryDiv.innerHTML = `
                    <div class="category-header">
                        <span class="category-name">${category}</span>
                        <span class="category-allocation">${data.allocation}%</span>
                    </div>
                    <div class="category-bar-container">
                        <div class="category-bar" style="width: ${data.allocation}%; background: linear-gradient(90deg, ${data.color}, ${data.colorLight})"></div>
                    </div>
                    <div class="category-amount">${formatCurrency(amount)}</div>
                    ${breakdownHTML}
                    <div class="category-details">
                        Expected Return: ${data.expectedReturn} • Durability: ${data.avgDurability}/10
                    </div>
                `;
                
                categoryList.appendChild(categoryDiv);
            });
            
            container.classList.add('active');
            container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function showDetails(category) {
            const data = portfolioData[category];
            const { total } = calculateTotalInvestment();
            const budget = total || 100000;
            const categoryAmount = (budget * data.allocation) / 100;
            
            const modal = document.getElementById('detailModal');
            const content = document.getElementById('modalContent');
            
            // Build strategy info header
            let strategyInfoHTML = '';
            if (currentStrategy === 'mixed') {
                const lumpsum = parseFloat(document.getElementById('mixedLumpsum').value) || 0;
                const recurring = parseFloat(document.getElementById('mixedRecurring').value) || 0;
                const frequency = document.getElementById('mixedFrequency').value;
                const frequencyLabel = getFrequencyLabel(frequency);
                const period = parseFloat(document.getElementById('mixedPeriod').value);
                
                const categoryLumpsum = (lumpsum * data.allocation) / 100;
                const categoryRecurring = (recurring * data.allocation) / 100;
                
                strategyInfoHTML = `
                    <div style="background: rgba(212, 175, 55, 0.1); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(212, 175, 55, 0.2);">
                        <div style="font-size: 0.85rem; color: var(--color-silver); margin-bottom: 12px; text-transform: uppercase; letter-spacing: 1px;">Mixed Investment Strategy</div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                            <div>
                                <div style="font-size: 0.75rem; color: var(--color-silver); margin-bottom: 4px;">Initial Lump Sum</div>
                                <div style="font-size: 1.6rem; font-weight: 700; color: var(--color-gold); font-family: 'Cormorant Garamond', serif;">${formatCurrency(categoryLumpsum)}</div>
                            </div>
                            <div>
                                <div style="font-size: 0.75rem; color: var(--color-silver); margin-bottom: 4px;">Recurring (per ${frequencyLabel})</div>
                                <div style="font-size: 1.6rem; font-weight: 700; color: var(--color-copper); font-family: 'Cormorant Garamond', serif;">${formatCurrency(categoryRecurring)}</div>
                            </div>
                        </div>
                        <div style="font-size: 0.8rem; color: var(--color-silver); margin-top: 12px; padding-top: 12px; border-top: 1px solid rgba(212, 175, 55, 0.15);">
                            Over ${period} months, you'll invest a total of <strong style="color: var(--color-gold);">${formatCurrency(categoryAmount)}</strong> in this category
                        </div>
                    </div>
                `;
            }
            
            let holdingsHTML = '';
            data.holdings.forEach(holding => {
                const holdingAmount = (budget * holding.allocation) / 100;
                const growthBadge = holding.growth === 'Very High' || holding.growth === 'High' ? 'badge-high' : 
                                   holding.growth === 'Moderate' ? 'badge-medium' : 'badge-low';
                
                // Calculate mixed strategy breakdown for individual holdings
                let mixedBreakdown = '';
                if (currentStrategy === 'mixed') {
                    const { total } = calculateTotalInvestment();
                    const lumpsum = parseFloat(document.getElementById('mixedLumpsum').value) || 0;
                    const recurring = parseFloat(document.getElementById('mixedRecurring').value) || 0;
                    const frequency = document.getElementById('mixedFrequency').value;
                    const frequencyLabel = getFrequencyLabel(frequency);
                    
                    const holdingLumpsum = (lumpsum * holding.allocation) / 100;
                    const holdingRecurring = (recurring * holding.allocation) / 100;
                    
                    mixedBreakdown = `
                        <div style="font-size: 0.75rem; color: var(--color-silver); margin-top: 4px;">
                            Initial: ${formatCurrency(holdingLumpsum)} + ${formatCurrency(holdingRecurring)}/${frequencyLabel}
                        </div>
                    `;
                }
                
                holdingsHTML += `
                    <tr>
                        <td><strong>${holding.ticker}</strong></td>
                        <td>
                            ${holding.name}
                            ${mixedBreakdown}
                        </td>
                        <td>${holding.allocation}%</td>
                        <td>${formatCurrency(holdingAmount)}</td>
                        <td>${holding.durability}/10</td>
                        <td><span class="badge ${growthBadge}">${holding.growth}</span></td>
                    </tr>
                `;
            });
            
            content.innerHTML = `
                <h2 style="color: ${data.color}; margin-bottom: 10px;">${category}</h2>
                <div style="font-size: 2.5rem; font-weight: 700; color: var(--color-gold); margin-bottom: 30px; font-family: 'Cormorant Garamond', serif;">
                    ${formatCurrency(categoryAmount)}
                </div>

                ${strategyInfoHTML}

                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">Allocation</div>
                        <div class="metric-value">${data.allocation}%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Expected Return</div>
                        <div class="metric-value">${data.expectedReturn}</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Volatility</div>
                        <div class="metric-value">${data.volatility}</div>
                    </div>
                </div>

                <div class="thesis-section">
                    <h3>Investment Thesis</h3>
                    <p>${data.thesis}</p>
                </div>

                <div class="thesis-section">
                    <h3>Key Catalysts</h3>
                    <p>${data.catalysts}</p>
                </div>

                <div class="thesis-section">
                    <h3>Individual Holdings</h3>
                    <table class="holdings-table">
                        <thead>
                            <tr>
                                <th>Ticker</th>
                                <th>Name</th>
                                <th>Allocation</th>
                                <th>Amount</th>
                                <th>Durability</th>
                                <th>Growth</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${holdingsHTML}
                        </tbody>
                    </table>
                </div>
            `;
            
            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('detailModal').classList.remove('active');
        }

        // Close modal on outside click
        document.getElementById('detailModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // Close modal on ESC key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>
